# 如何用Jekyll组织内容

Title: 如何用Jekyll组织内容
Date: 2024-04-07
Keywords: Web, Python

---

静态网页是预先存储在浏览器中的网页，如博客或百科类网页。Jekyll是一个将Markdown格式的内容转换为静态网页的工具。使用Python脚本可以辅助Jekyll实现内容转换和维护。这种组织方式能够方便整理和维护长期写作的内容。

[toc]

---

## 静态网页的内容组织和呈现

静态的概念与动态相对。如果事先将浏览器需要的全部信息都存储下来，而在浏览里无须动态生成其他内容的话，那么这种网页就称为静态网页。我各举一个例子，用比较的方法进一步说明静态网页概念。

- 动态网页的举例，购物类或大屏类的网页，它的内容是实时变化的。这些内容几乎不可能在网页上线之前预先存储下来，因此这些网页内容需要在用户浏览时**动态生成**。
- 静态网页的举例，博客类或百科类的网页，它的内容就像是纸质媒体内容放在互联网上。这些内容的更新速度很慢，所以赖以在网页上线之前预先编译成可用的html，需要使用的image、audio、video等资源也可以事先放置在某个固定的地方。

静态网页更像是一个知识库，知识库需要的不是实时更新，而是方便整理和维护。因此我认为，要进行长期写作的话，将写出来的内容用静态网页的方法进行组织和呈现，是有必要的。

> A **static web page**, sometimes called a **flat page** or a **stationary page**, is a [web page](https://en.wikipedia.org/wiki/Web_page) that is delivered to a [web browser](https://en.wikipedia.org/wiki/Web_browser) exactly as stored,[[1]](https://en.wikipedia.org/wiki/Static_web_page#cite_note-Melendez,_SmallBusiness,_2018-1) in contrast to [dynamic web pages](https://en.wikipedia.org/wiki/Dynamic_web_page) which are generated by a web application.[[2]](https://en.wikipedia.org/wiki/Static_web_page#cite_note-Encyclopedia,_PCMag,_2017-2)
> 
> 
> [Static web page](https://en.wikipedia.org/wiki/Static_web_page)
> 

## Jekyll做了什么

我准备把日常写出来的散碎内容放在github上托管，而Jekyll似乎是一个不错的选择，因为它是这样一个静态网页的转换工具

> **Transform your plain text into static websites and blogs.**
> 

简单来说，它能够将组织良好的markdown格式的短文（在article目录中），以静态网页的方式呈现（在full-content中）。

![Untitled](%E5%A6%82%E4%BD%95%E7%94%A8Jekyll%E7%BB%84%E7%BB%87%E5%86%85%E5%AE%B9%20e126e57f73794a47a8d94e657534e96f/Untitled.png)

![Untitled](%E5%A6%82%E4%BD%95%E7%94%A8Jekyll%E7%BB%84%E7%BB%87%E5%86%85%E5%AE%B9%20e126e57f73794a47a8d94e657534e96f/Untitled%201.png)

[Jekyll • Simple, blog-aware, static sites](https://jekyllrb.com/)

## 如何让Jekyll工作起来

Step 0. Before everything, you need to write the articles, and you need the RubyGems to run the jekyll.

Step 1. Start the Jekyll project

```powershell
# Install the jekyll and bundler gems
gem install bundler jekyll

# Create a new Jekyll site at ./myblog
jekyll new myblog

# Change into your new directory
cd myblog

# Fit the project, see Step 2

# Build the site and make it available on a local server.
bundle exec jekyll serve
```

Step 2. Fit the project
It tells the Jekyll where to place your posts.
The posts are the html files inside the [./myblog/_site/full-content/](https://www.notion.so/myblog/_site/full-content/) folder.

```
# --------------------
# Add the following to the myblog/_config.yml
permalink: /full-content/:year-:month-:day-:title
```

[Installing Ruby](https://www.ruby-lang.org/en/documentation/installation/)

Step 3. Run the [./python/app.py](https://www.notion.so/python/app.py) to update your articles inside [./article](https://www.notion.so/article) folder.
The jekyll will **automatically** update the [./myblog/_site](https://www.notion.so/myblog/_site) folder since the [_posts](https://www.notion.so/myblog/_posts) is changed by the app. Moreover, the app also copies the folders with the images into the [./myblog/_site/full-content/](https://www.notion.so/myblog/_site/full-content/) folder, where the posted articles are stored as html.

```powershell
python python/app.py
```

## 安装Ruby时可能遇到的坑

- The gem needs new sources
    
    ```powershell
    # Update gem sources
    # 添加镜像源并移除默认源
    gem sources --add <https://mirrors.tuna.tsinghua.edu.cn/rubygems/> --remove <https://rubygems.org/>
    # 列出已有源
    gem sources -l
    # 应该只有镜像源一个
    # <https://mirrors.tuna.tsinghua.edu.cn/rubygems/>
    
    # Update bundle sources
    bundle config mirror.<https://rubygems.org> <https://mirrors.tuna.tsinghua.edu.cn/rubygems>
    ```
    

- Install jekyll
    
    ```powershell
    # Option -V toggles the debug verbose
    gem install bundler kekyll -V
    ```
    
    [rubygems | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/rubygems/)
    
- The jekyll needs msys2 support, and the msys2 needs its toolchain.
Here is how to install them.
- The bundle needs its gems(dependencies)

![https://www.notion.so./docs/img/bundle-install-gems.png](https://www.notion.so./docs/img/bundle-install-gems.png)

```powershell
# Cd to the blog's directory
cd myblog
# Install the gems
bundle install
```

![jekyll-needs-msys2-support.png](%E5%A6%82%E4%BD%95%E7%94%A8Jekyll%E7%BB%84%E7%BB%87%E5%86%85%E5%AE%B9%20e126e57f73794a47a8d94e657534e96f/jekyll-needs-msys2-support.png)

![msys2-development-toolchain.png](%E5%A6%82%E4%BD%95%E7%94%A8Jekyll%E7%BB%84%E7%BB%87%E5%86%85%E5%AE%B9%20e126e57f73794a47a8d94e657534e96f/msys2-development-toolchain.png)

![bundle-install-gems.png](%E5%A6%82%E4%BD%95%E7%94%A8Jekyll%E7%BB%84%E7%BB%87%E5%86%85%E5%AE%B9%20e126e57f73794a47a8d94e657534e96f/bundle-install-gems.png)

## 需要用python做什么

虽然Jekyll是个好用的工具，但让它动起来还需要进行一些额外的操作，主要分为两步

1. 首先，需要在markdown文件中指定文章的内容选项，并转换成Jekyll指定的格式；
2. 其次，需要将这些转换后的文件转移到_posts目录中，这样Jekyll才能识别并自动维护它们。

这些工作我是使用python脚本来做的。

![Untitled](%E5%A6%82%E4%BD%95%E7%94%A8Jekyll%E7%BB%84%E7%BB%87%E5%86%85%E5%AE%B9%20e126e57f73794a47a8d94e657534e96f/Untitled%202.png)